From a71a9d5a39cd75fac1af0134d923274bb3fdda70 Mon Sep 17 00:00:00 2001
From: Robert Nelson <robertcnelson@gmail.com>
Date: Tue, 16 Aug 2022 17:54:39 -0500
Subject: [PATCH 2/2] iwlwifi: disable pnvm loading

Signed-off-by: Robert Nelson <robertcnelson@gmail.com>
---
 drivers/net/wireless/intel/iwlwifi/fw/pnvm.c | 12 ++++++------
 1 file changed, 6 insertions(+), 6 deletions(-)

diff --git a/drivers/net/wireless/intel/iwlwifi/fw/pnvm.c b/drivers/net/wireless/intel/iwlwifi/fw/pnvm.c
index 37ce4fe136c5..658af65659fd 100644
--- a/drivers/net/wireless/intel/iwlwifi/fw/pnvm.c
+++ b/drivers/net/wireless/intel/iwlwifi/fw/pnvm.c
@@ -249,8 +249,8 @@ int iwl_pnvm_load(struct iwl_trans *trans,
 		if (strlen(trans->cfg->fw_name_pre) < sizeof(pnvm_name))
 			pnvm_name[strlen(trans->cfg->fw_name_pre) - 1] = '.';
 
-		ret = firmware_request_nowarn(&pnvm, pnvm_name, trans->dev);
-		if (ret) {
+		//ret = firmware_request_nowarn(&pnvm, pnvm_name, trans->dev);
+		//if (ret) {
 			IWL_DEBUG_FW(trans, "PNVM file %s not found %d\n",
 				     pnvm_name, ret);
 			/*
@@ -259,11 +259,11 @@ int iwl_pnvm_load(struct iwl_trans *trans,
 			 * trying again over and over.
 			 */
 			trans->pnvm_loaded = true;
-		} else {
-			iwl_pnvm_parse(trans, pnvm->data, pnvm->size);
+		//} else {
+		//	iwl_pnvm_parse(trans, pnvm->data, pnvm->size);
 
-			release_firmware(pnvm);
-		}
+		//	release_firmware(pnvm);
+		//}
 	} else {
 		/* if we already loaded, we need to set it again */
 		ret = iwl_trans_set_pnvm(trans, NULL, 0);
-- 
2.30.2

